<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>发布 CodeLab Adapter 3.4 - 夜行人</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="种瓜" /><meta name="description" content=" 组合原则: 设计时考虑拼接组合。如果程序彼此之间不能有效通信，那么软件就难免会陷入复杂度的泥沼。 &amp;ndash; Eric S·Raymond《Unix 编程艺术》
 3.4 包含以下更新。
" /><meta name="keywords" content="education, programming, Technology" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="http://wwj718.github.io/post/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/release-3-4/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.69e0bbe2419d9b0efbdcc1d3b4338bba03a6f6789ae2832bc1af58e5b2757470.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="发布 CodeLab Adapter 3.4" />
<meta property="og:description" content="
组合原则: 设计时考虑拼接组合。如果程序彼此之间不能有效通信，那么软件就难免会陷入复杂度的泥沼。 &ndash; Eric S·Raymond《Unix 编程艺术》

3.4 包含以下更新。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://wwj718.github.io/post/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/release-3-4/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-07-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-17T00:00:00+00:00" />

<meta itemprop="name" content="发布 CodeLab Adapter 3.4">
<meta itemprop="description" content="
组合原则: 设计时考虑拼接组合。如果程序彼此之间不能有效通信，那么软件就难免会陷入复杂度的泥沼。 &ndash; Eric S·Raymond《Unix 编程艺术》

3.4 包含以下更新。"><meta itemprop="datePublished" content="2020-07-17T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-07-17T00:00:00+00:00" />
<meta itemprop="wordCount" content="3211">
<meta itemprop="keywords" content="CodeLab," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="发布 CodeLab Adapter 3.4"/>
<meta name="twitter:description" content="
组合原则: 设计时考虑拼接组合。如果程序彼此之间不能有效通信，那么软件就难免会陷入复杂度的泥沼。 &ndash; Eric S·Raymond《Unix 编程艺术》

3.4 包含以下更新。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">夜行人</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/post/%E9%9A%8F%E7%AC%94/aboutme/">
        <li class="mobile-menu-item">About-Me</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">夜行人</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/%E9%9A%8F%E7%AC%94/aboutme/">About-Me</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">发布 CodeLab Adapter 3.4</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-07-17 </span>
        <div class="post-category">
            <a href="/categories/codelab/"> CodeLab </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#完整版full和精简版lite">完整版(<code>full</code>)和精简版(<code>lite</code>)</a>
      <ul>
        <li><a href="#完整版">完整版</a></li>
        <li><a href="#精简版lite">精简版(<code>lite</code>)</a></li>
        <li><a href="#自省与多环境并存">自省与多环境并存</a></li>
      </ul>
    </li>
    <li><a href="#易用性">易用性</a>
      <ul>
        <li><a href="#microbit-固件烧录">micro:bit 固件烧录</a></li>
        <li><a href="#简化-microbit-radio-的功能板编程难度">简化 microbit radio 的功能板编程难度</a></li>
      </ul>
    </li>
    <li><a href="#新增插件">新增插件</a>
      <ul>
        <li><a href="#extension_sirihttpsadaptercodelabclubextension_guidesiri"><a href="https://adapter.codelab.club/extension_guide/siri/">extension_Siri</a></a></li>
        <li><a href="#simple_nluhttpsadaptercodelabclubextension_guidesimple_nlu"><a href="https://adapter.codelab.club/extension_guide/simple_NLU/">simple_NLU</a></a></li>
        <li><a href="#kano-motion-sensorhttpsadaptercodelabclubextension_guidemotion_sensor"><a href="https://adapter.codelab.club/extension_guide/motion_sensor/">Kano motion sensor</a></a></li>
        <li><a href="#uart-adapter-extensionhttpsadaptercodelabclubextension_guideuart_adapter"><a href="https://adapter.codelab.club/extension_guide/uart_adapter/">UART adapter extension</a></a></li>
        <li><a href="#networkzero-extensionhttpsadaptercodelabclubextension_guidenetworkzero"><a href="https://adapter.codelab.club/extension_guide/NetworkZero/">NetworkZero extension</a></a></li>
        <li><a href="#simplepyboard-extensionhttpsadaptercodelabclubextension_guidesimplepyboard"><a href="https://adapter.codelab.club/extension_guide/SimplePyboard/">SimplePyboard extension</a></a></li>
      </ul>
    </li>
    <li><a href="#插件增强">插件增强</a>
      <ul>
        <li><a href="#physical-blocks-插件">physical blocks 插件</a></li>
      </ul>
    </li>
    <li><a href="#bug-修复">bug 修复</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#在-jupyterlab-中查看当前所处的-python-环境">在 jupyterlab 中查看当前所处的 Python 环境</a></li>
        <li><a href="#在-jupyterlab-里安装第三方库">在 jupyterlab 里安装第三方库</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>组合原则: 设计时考虑拼接组合。如果程序彼此之间不能有效通信，那么软件就难免会陷入复杂度的泥沼。 &ndash; Eric S·Raymond《Unix 编程艺术》</p>
</blockquote>
<p>3.4 包含以下更新。</p>
<h1 id="重大更新">重大更新</h1>
<h2 id="完整版full和精简版lite">完整版(<code>full</code>)和精简版(<code>lite</code>)</h2>
<p>从 3.4 开始，CodeLab Adapter 将同时发布完整版和精简版。</p>
<p>完整版和精简版的区别是什么？如何做选择呢？</p>
<h3 id="完整版">完整版</h3>
<h4 id="用户视角">用户视角</h4>
<p>完整版主要针对两类人群:</p>
<ul>
<li>初学者</li>
<li>准备再次分发 CodeLab Adapter 的开发者/企业</li>
</ul>
<h5 id="初学者">初学者</h5>
<p>如果你是一个初学者，准备使用 CodeLab Adapter ，建议选择完整版。</p>
<p>完整版内置了一个完整的 Python 环境和 <a href="https://adapter.codelab.club/extension_guide/jupyterlab/">jupyterlab</a> 。以及 CodeLab 偏好的其他第三方 Python 库，如此一来避免了像<code>打开命令行(cmd)使用pip安装依赖</code> 之类令新手困惑的操作， 有了 jupyterlab ，绝大多数操作不必进入命令行。</p>
<p>此外, CodeLab Adapter 由于携带了 <a href="https://adapter.codelab.club/extension_guide/physical_blocks/">physical blocks</a> 插件，可用于构建 <a href="/post/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/codelab-dynamictable-a-seeing-world/">DynamicTable</a>, 引起了一些展厅的兴趣。他们希望得到一个开箱可用的方案，CodeLab Adapter 完整版让这样的方案唾手可得。</p>
<h5 id="准备再次分发-codelab-adapter-的开发者企业">准备再次分发 CodeLab Adapter 的开发者/企业</h5>
<p>陆续有企业希望通过跟 CodeLab 建立商务合作，来获取定制和再分发 CodeLab Adapter 的能力。</p>
<p>出于时间、人力和目标的考虑， 我们对软件定制化服务兴趣不大。但根据使用场景的差别，定制化的需求是可理解的。</p>
<p>我们希望构建一个更为通用的方案，让 CodeLab Adapter 可以在没有我们干预的情况下，被开发者/企业定制和再分发。其中的关键是软件的可组合性（主要受 Unix 哲学的影响）。</p>
<p>这个想法一直存在，之前做了很多的隐性铺垫（没有文档化），它的第一个用例是将 Adapter 以 headless 模式集成到<code>Longan 盒</code>中。</p>
<p>3.4 版本对可组合性做了目前为止最大的提升。</p>
<p>开发者/企业目前可通过修改完整版中的<code>app_settings.py</code> Python 文件，来制定 Adapter 的行为。（更多细节参考完整版里的<code>app_settings.py</code>文件，它只是普通 Python 脚本！）</p>
<p>一个典型用例是，你希望双击 Adapter 的时候，打开你的编程平台，而不是默认的<code>https://codelab-adapter.codelab.club:12358/</code></p>
<p>那么你只需要在<code>app_settings.py</code>添加一个配置项: <code>WEB_UI_ENDPOINT</code>。</p>
<p>让我们将 CodeLab Adapter 的启动页面设为 CodeLab 社区创作页 <code>WEB_UI_ENDPOINT = &quot;https://scratch.codelab.club/projects/editor/&quot;</code> （我们将在暑期开展为期 1 个多月的编程活动，社区将同步投入使用）</p>
<p><code>完整版</code>之所以能够与可嵌入的 Python 解释器协同工作，在技术层面，只是配置了一些<code>app_settings.py</code>参数而已!(通过以下代码指定<a href="https://adapter.codelab.club/user_guide/settings/#python3_path"><code>PYTHON3</code>所在路径</a>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pathlib</span><span class="o">,</span> <span class="nn">platform</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s1">&#39;frozen&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">executable_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">executable</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&#34;Darwin&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_dir</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">executable_path</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">PYTHON3_PATH</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">app_dir</span> <span class="o">/</span> <span class="s2">&#34;python_env&#34;</span> <span class="o">/</span> <span class="s2">&#34;bin&#34;</span> <span class="o">/</span> <span class="s2">&#34;python3.7m&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&#34;Windows&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_dir</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">executable_path</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">PYTHON3_PATH</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">app_dir</span> <span class="o">/</span> <span class="s2">&#34;python_env&#34;</span> <span class="o">/</span> <span class="s2">&#34;python&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&#34;Linux&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_dir</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">executable_path</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>实际上， 整个<code>完整版</code> 都只是 Adapter 可组合性的一个用例！ 更多可配置项目参考:<a href="https://adapter.codelab.club/user_guide/settings/#_1">配置文件</a>。</p>
<p>关于 Adapter 可组合性的更多想象， 参考<a href="https://adapter.codelab.club/dev_guide/%E5%AE%9A%E5%88%B6%E4%B8%8E%E5%88%86%E5%8F%91/">定制与分发</a>。</p>
<p>ps: MacOS下， <code>app_settings.py</code> 被嵌入在软件包内，而不像Windows下，处于同一级目录。 MacOS下，<code>app_settings.py</code> 位于: <code>codelab-adapter-3_4_1-mac-full.app/Contents/MacOS/</code>里。</p>
<h4 id="技术视角">技术视角</h4>
<p>完整版内置了一个可嵌入的 Python 解释器(embeddable python), 是一个全功能的 Python，可以安装第三方库(<code>pip</code>)。</p>
<p>内置完整 Python 解释器的最初动机是，降低<a href="https://adapter.codelab.club/dev_guide/Adapter-Node/">Adapter Node</a>使用门槛。</p>
<p>最初设计 <a href="https://adapter.codelab.club/dev_guide/Adapter-Node/">Adapter Node</a> 是为了让熟悉 Python(或其他编程语言) 的用户能够灵活构建插件。</p>
<p>后来从邮件反馈里发现，初学者对一些内置的<a href="https://adapter.codelab.club/dev_guide/Adapter-Node/">Adapter Node</a>很感兴趣, 像 <a href="https://adapter.codelab.club/extension_guide/jupyterlab/">jupyterlab</a> 和 <a href="https://adapter.codelab.club/extension_guide/physical_blocks/">physical blocks</a>。</p>
<p>这二者都涉及到复杂依赖，要求<a href="https://adapter.codelab.club/Python_Projects/install_python/">本地安装有 Python3</a>。</p>
<p>为了让这些用户感兴趣的插件，更早能被玩起来，我们准备为 <a href="https://adapter.codelab.club/dev_guide/Adapter-Node/">Adapter Node</a> 提供一个真实的 Python 环境，在发布时内置好第三方库， 如 physical blocks 插件依赖的 <a href="https://opencv.org/">OpenCV</a> 和 Jupyterlab 插件依赖的<a href="https://jupyterlab.readthedocs.io/en/stable/">jupyterlab</a>， 如此一来这些插件就能做到开箱可用。</p>
<p>此外，CodeLab Adapter 在学校里被一些师生所使用，学校网络环境复杂，临时安装依赖可能会遇到问题，这也是我们发布完整版的动机之一。</p>
<h3 id="精简版lite">精简版(<code>lite</code>)</h3>
<p>之前的 CodeLab Adapter 一直都是精简版。</p>
<p>如果你是 CodeLab Adapter 的老用户，可能会更偏好精简版，因为它更自由，入门门槛可能会高一些。</p>
<p>更自由！这是多么重要的理由！像我们这类喜欢折腾的人，最爱自由而最恨限制，在日常生活中，难以忍受的事情是很多的，软件世界不该成为现实的翻版。</p>
<p>精简版目前一直控制在 20MB 以内。Adapter 精简版可以被集成到其他软件内部，诸如 Electron 构建的桌面应用里。</p>
<p><code>完整版</code>可以看作整合了精简版的外部软件: 塞入了 Python 解释器目录和<code>app_settings.py</code>启动文件。</p>
<h3 id="自省与多环境并存">自省与多环境并存</h3>
<p>如果你有多个版本的 Adapter 并存，可以利用 Adapter 的<a href="https://www.codelab.club/blog/3-release/#%E8%87%AA%E7%9C%81">自省能力</a>，看看它运行时候的环境/参数细节:</p>
<h2 id="易用性">易用性</h2>
<p>易用性是每个版本都试图提升的特性。</p>
<h3 id="microbit-固件烧录">micro:bit 固件烧录</h3>
<p>3.4 版本内置了 micro:bit 固件烧录。</p>
<p>micro:bit 固件烧录目前是一项系统服务，作为 RESTful API 对外提供服务，这意味着插件作者，可以随时使用它帮助用户刷入固件。既可以在自行构建的 UI 里，也可以在 Scratch 积木里，或者在第三方 python 包里，只需调用 Adapter 的固件烧录服务即可。</p>
<p>当前，usb_microbit 插件使用了这项服务，更多细节参考: <a href="https://github.com/CodeLabClub/scratch3_usb_microbit/blob/master/index.js#L940">flash_firmware</a>。</p>
<p>我们会尽快将这些稳定下来的接口文档化。</p>
<h3 id="简化-microbit-radio-的功能板编程难度">简化 microbit radio 的功能板编程难度</h3>
<p>我们通过构建 <a href="https://adapter.codelab.club/extension_guide/microbit_radio/">microbit_radio</a> 插件，<a href="https://www.codelab.club/blog/codelab-adapter-microbit-deep-connect/">深度连接 micro:bit 生态</a>。</p>
<p>3.4 版本中，优化了串口通信，提高<code>功能板</code>侧编程的可理解性。</p>
<h2 id="新增插件">新增插件</h2>
<p>3.4 版本新增了若干插件(6 个)，主要得益于 3.0 架构的灵活性，使得扩展新功能非常轻松。</p>
<h3 id="extension_sirihttpsadaptercodelabclubextension_guidesiri"><a href="https://adapter.codelab.club/extension_guide/siri/">extension_Siri</a></h3>
<p>该插件将 Siri 接入到 Scratch，并与 CodeLab 可编程空间里的一切互动</p>
<p><video src="https://adapter.codelab.club/video/1593328552202841.mp4" controls="controls"></video></p>
<h3 id="simple_nluhttpsadaptercodelabclubextension_guidesimple_nlu"><a href="https://adapter.codelab.club/extension_guide/simple_NLU/">simple_NLU</a></h3>
<p>simple NLU 是一个简单的语义处理器，基于简单的规则匹配，可以做一些有趣的事情，而且因其足够简单，很适合作为课堂入门案例讲解。</p>
<p>主要受到 Cozmo 社区<a href="https://github.com/rizal72/Cozmo-Voice-Commands">Cozmo-Voice-Commands</a>项目的启发(@jinlei 最近一次来访，提到希望在课堂上演示语音控制 Cozmo)。</p>
<p>看该插件和 Siri 插件组合使用的效果:</p>
<p><video src="https://adapter.codelab.club/video/1593410656522462.mp4" controls="controls"></video></p>
<p><video src="https://adapter.codelab.club/video/1593428681227193.mp4" controls="controls"></video></p>
<p>该插件可以和任何文本协同工作，可以来自 Siri 的输入，也可以来自任何其他地方。</p>
<hr>
<p>也附上 @liuqing 恶搞的大合集:</p>
<p><video src="https://adapter.codelab.club/video/1593431022011083.mp4" controls="controls"></video></p>
<h3 id="kano-motion-sensorhttpsadaptercodelabclubextension_guidemotion_sensor"><a href="https://adapter.codelab.club/extension_guide/motion_sensor/">Kano motion sensor</a></h3>
<blockquote>
<p>coding kit, for movers, shakers and makers.</p>
</blockquote>
<p>Motion Sensor 简单易用，它可以感应到手的前后左右运动</p>
<p><video  src="https://adapter.codelab.club/video/1594974633436089.mp4" controls="controls"></video></p>
<p>以及感应到物体离它的距离:</p>
<p><video width=50% src="https://adapter.codelab.club/video/1594974631201758.mp4" controls="controls"></video></p>
<p>以下是使用该插件，接入 Adapter 后，作为 Robomaster 控制器的简单例子</p>
<p><video width=50% src="https://adapter.codelab.club/video/1593762499427152.mp4" controls="controls"></video></p>
<h3 id="uart-adapter-extensionhttpsadaptercodelabclubextension_guideuart_adapter"><a href="https://adapter.codelab.club/extension_guide/uart_adapter/">UART adapter extension</a></h3>
<p>一直对 micro:bit 和 Adapter 通信的固件很不喜欢，几次重构都不满意。受 DJI Robomaster 阻塞式明文协议和 Jupyter 的通信协议（代码即数据）启发，实现了一个十分简单通用的 Scratch UART 插件，之后接入新的 uart 设备只需几分钟。</p>
<p><img src="https://adapter.codelab.club/img/WechatIMG1579.jpeg" alt=""></p>
<h3 id="networkzero-extensionhttpsadaptercodelabclubextension_guidenetworkzero"><a href="https://adapter.codelab.club/extension_guide/NetworkZero/">NetworkZero extension</a></h3>
<p>NetworkZero 的目标是让局域网通信变得简单, 使局域网内的游戏制作和网络教学变成简单。</p>
<p>收信人: <strong>地址</strong> (地址名)，并 <strong>接收</strong> 来自这个地址的消息。
<img src="https://adapter.codelab.club/img/16f959a43d2d3a24f60867f4ec55e8e9.png" alt=""></p>
<p>寄信人: 往 <strong>目标地址</strong> 发送 <strong>信息</strong></p>
<p><img src="https://adapter.codelab.club/img/94e1e931cdd968e13f77169592956eb2.png" alt=""></p>
<p>允许任何人公布通信地址，所以可以轻松构建网状结构。</p>
<p>典型应用场景：</p>
<ul>
<li>局域网联机游戏</li>
<li>局域网聊天</li>
<li>多人联机控制机器人</li>
<li>与 Python 程序(诸如树莓派机器人)互动</li>
</ul>
<h3 id="simplepyboard-extensionhttpsadaptercodelabclubextension_guidesimplepyboard"><a href="https://adapter.codelab.club/extension_guide/SimplePyboard/">SimplePyboard extension</a></h3>
<p><img src="https://adapter.codelab.club/img/pyboard.jpeg" alt=""></p>
<p>支持大多数的 pyboard (烧录 micropython 的 board)， 诸如 esp32、esp8266、micro:bit、 掌控板、bpi:bit&hellip;</p>
<p>采用的是 micropyhton 的 REPL 机制。</p>
<h2 id="插件增强">插件增强</h2>
<h3 id="physical-blocks-插件">physical blocks 插件</h3>
<p>支持空间坐标信息（与 Scratch 坐标系保持一致）。</p>
<p>如此一来，physical blocks 目前:</p>
<ul>
<li>方向</li>
<li>平面坐标</li>
<li>marker id</li>
</ul>
<p>Toio 主创团队认为<code>位置，方向和时间</code>是构建许多好玩游戏的关键要素，Toio 给出了许多惊艳的演示。</p>
<p>physical blocks 目前也完整支持了这些要素。</p>
<p>基于 marker 角度微小变化，构建的大楼震动检测器: (CodeLab 周末活动的参与者@taotao 的意外发现)</p>
<p><video src="https://adapter.codelab.club/video/1592219388632217.mp4" controls="controls"></video></p>
<p>基于平面坐标构建的交互式生日贺卡:</p>
<p><video src="https://adapter.codelab.club/video/1592575084486393.mp4" controls="controls"></video></p>
<p>受 Dynamicland 的交互故事书启发。</p>
<h2 id="bug-修复">bug 修复</h2>
<ul>
<li>为 Robomaster 连接添加 timeout 机制，避免设备不在线时无限期阻塞</li>
<li>修复初次运行 CodeLab Adapter，需要启动两次的问题(依赖关系问题)</li>
<li>避免刷新 web ui，Adapter 即刻退出，采取策略：所有连接都关闭之后，等待 10 秒再退出</li>
<li>将 tello 迁移到 v3 协议</li>
</ul>
<h1 id="开始使用">开始使用</h1>
<p><a href="https://adapter.codelab.club/user_guide/install/">下载最新 Adapter</a>。</p>
<p>配合 <a href="http://scratch3v3.codelab.club/">CodeLab Scratch</a> 使用时，建议刷新浏览器缓存。</p>
<h1 id="附">附</h1>
<h3 id="在-jupyterlab-中查看当前所处的-python-环境">在 jupyterlab 中查看当前所处的 Python 环境</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span class="line"><span class="cl"><span class="n">sys</span><span class="o">.</span><span class="n">executable</span> <span class="c1"># /Users/Alan/Desktop/adapter/codelab-adapter-3.4.0/full_mac/codelab-adapter.app/Contents/MacOS/python_env/bin/python3.7m</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="在-jupyterlab-里安装第三方库">在 jupyterlab 里安装第三方库</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">codelab_adapter_client.utils</span> <span class="kn">import</span> <span class="n">install_requirement</span>
</span></span><span class="line"><span class="cl"><span class="n">requirement</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;bottle&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">install_requirement</span><span class="p">(</span><span class="n">requirement</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>国外用户默认使用官方源，国内用户默认使用清华源(<code>https://pypi.tuna.tsinghua.edu.cn/simple</code>)。</p>
<p>安装之后，可供 Adapter Node 插件使用！</p>
<p>安装的插件，将内置在当前 Adapter 完整版中，由于它只是免安装软件，所以可以直接再分发。</p>
<p><img src="https://adapter.codelab.club/img/32e81dbd78f481c5de79edc9b88bea3a.png" alt=""></p>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">种瓜</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-07-17
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/codelab/">CodeLab</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E8%AF%BB%E4%B9%A6/conjectures-and-refutations/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">猜想与反驳</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E5%B0%91%E5%84%BF%E7%BC%96%E7%A8%8B/adapter-motion-sensor/">
            <span class="next-text nav-default">CodeLab Adapter 接入 Kano Motion Sensor</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-out-me" title="out-me"></a>
      <a href="https://github.com/wwj718" class="iconfont icon-github" title="github"></a>
  <a href="http://wwj718.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span><a target="_blank" href="/post/%E7%BC%96%E7%A8%8B/dynaverse-studio/">加入我们</a></span>
  <span class="division">|</span>
  <span><a target="_blank" href="https://cn.bing.com/search?q=site%3Awwj718.github.io%20%20codelab-adapter">搜索本站</a></span>
  <span class="division">|</span>
  <span><a target="_blank" href="/index.xml">RSS订阅</a></span>
  <span class="division">|</span>
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2013 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>种瓜</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?18db4b662c04fbd6cc2851d246c51b3f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>






</body>
</html>
