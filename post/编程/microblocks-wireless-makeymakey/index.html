<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MicroBlocks 编程案例: 制作无线 Makey Makey - 夜行人</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="种瓜" /><meta name="description" content="前言 Makey Makey 是个令人惊叹的项目。 它将自己描述为: 21世纪的发明套件 将世界连接到您的计算机 我们看看它的使用场景: 手工与编码。用橡皮泥或铅笔这样的日" /><meta name="keywords" content="education, programming, Technology" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="http://wwj718.github.io/post/%E7%BC%96%E7%A8%8B/microblocks-wireless-makeymakey/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.69e0bbe2419d9b0efbdcc1d3b4338bba03a6f6789ae2832bc1af58e5b2757470.css" rel="stylesheet">
<link rel="stylesheet" href="/post/img/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="MicroBlocks 编程案例: 制作无线 Makey Makey" />
<meta property="og:description" content="前言 Makey Makey 是个令人惊叹的项目。 它将自己描述为: 21世纪的发明套件 将世界连接到您的计算机 我们看看它的使用场景: 手工与编码。用橡皮泥或铅笔这样的日" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://wwj718.github.io/post/%E7%BC%96%E7%A8%8B/microblocks-wireless-makeymakey/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-11-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-11-18T00:00:00+00:00" />

<meta itemprop="name" content="MicroBlocks 编程案例: 制作无线 Makey Makey">
<meta itemprop="description" content="前言 Makey Makey 是个令人惊叹的项目。 它将自己描述为: 21世纪的发明套件 将世界连接到您的计算机 我们看看它的使用场景: 手工与编码。用橡皮泥或铅笔这样的日"><meta itemprop="datePublished" content="2023-11-18T00:00:00+00:00" />
<meta itemprop="dateModified" content="2023-11-18T00:00:00+00:00" />
<meta itemprop="wordCount" content="1043">
<meta itemprop="keywords" content="MicroBlocks," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MicroBlocks 编程案例: 制作无线 Makey Makey"/>
<meta name="twitter:description" content="前言 Makey Makey 是个令人惊叹的项目。 它将自己描述为: 21世纪的发明套件 将世界连接到您的计算机 我们看看它的使用场景: 手工与编码。用橡皮泥或铅笔这样的日"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">夜行人</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/post/%E9%9A%8F%E7%AC%94/aboutme/">
        <li class="mobile-menu-item">About-Me</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">夜行人</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/%E9%9A%8F%E7%AC%94/aboutme/">About-Me</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">MicroBlocks 编程案例: 制作无线 Makey Makey</h1>

      <div class="post-meta">
        <span class="post-time"> 2023-11-18 </span>
        <div class="post-category">
            <a href="/categories/%E7%BC%96%E7%A8%8B/"> 编程 </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#想要更多">想要更多</a></li>
    <li><a href="#玩起来">玩起来</a>
      <ul>
        <li><a href="#安装定制固件">安装定制固件</a></li>
      </ul>
    </li>
    <li><a href="#faq">FAQ</a>
      <ul>
        <li><a href="#如何编译到其他-microblocks-支持的板子里">如何编译到其他 MicroBlocks 支持的板子里?</a></li>
        <li><a href="#使用-wifi-控制蓝牙键盘">使用 wifi 控制蓝牙键盘</a></li>
        <li><a href="#如何将-esp32-作为蓝牙主机-连接市面上的主流游戏手柄">如何将 esp32 作为蓝牙主机, 连接市面上的主流游戏手柄?</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="前言">前言</h1>
<p><a href="https://makeymakey.com/">Makey Makey</a> 是个令人惊叹的项目。</p>
<p>它将自己描述为:</p>
<blockquote>
<p>21世纪的发明套件</p>
</blockquote>
<blockquote>
<p>将世界连接到您的计算机</p>
</blockquote>
<p>我们看看它的使用场景:</p>
<p>手工与编码。用橡皮泥或铅笔这样的日常材料设计你自己的控制器:</p>
<p><img src="/post/img/Makey-Makey-Image1.webp" alt=""></p>
<p>水果乐器。世上到处是导电物体和材料。用水果和办公用品制作音乐电路:</p>
<p><img src="/post/img/MakeyMakeyImage2.webp" alt=""></p>
<p>自制传感器。利用铝箔、硬币和回形针，像科学家一样发明传感器。</p>
<p><img src="/post/img/Makey-Makey-Image3.webp" alt=""></p>
<p>Makey Makey 是如此简单, 以至于你可以完全专注于自己的想法!</p>
<p>Makey Makey 是如此通用, 以至于你可以将整个世界连接到您的计算机！</p>
<p>好的创作工具, 鼓励你去做自己感兴趣的事情, 它给予你支持而不是负担。就此而言, Makey Makey 拥有与 Scratch, MicroBlocks 一样出色的品质。</p>
<h1 id="想要更多">想要更多</h1>
<blockquote>
<p>凡有的，还要加给他，叫他有余； &ndash; 马太效应</p>
</blockquote>
<p>Makey Makey 拥有如此丰富的可能性, 以至于我们想要更多 !</p>
<p>喜欢 Makey Makey 的人经常会提出这 3 种需求:</p>
<ul>
<li>能够不用线连在电脑上吗? 这样就更方便构建跳舞毯等项目</li>
<li>能够不要在身上绑上接地线吗?</li>
<li>能够便宜一点吗! (淘宝上要 400 多块钱)</li>
</ul>
<p>可以可以可以!</p>
<p>我们可以使用 MicroBlocks 对 ESP32 编程, 制作一个 <strong>20 块钱的 无线 Makey Makey, 它甚至不需要接地线</strong></p>
<h1 id="玩起来">玩起来</h1>
<h2 id="安装定制固件">安装定制固件</h2>
<p><strong>提醒</strong>: 计算机会记住连接过的蓝牙键盘。如果你刷过这个固件, 以后刷其他固件，可能会无法连接 MicroBlocks IDE, 因为设备被计算机当成了蓝牙键盘. 你需要在计算机中&quot;忘记&quot;这个蓝牙键盘,在 iOS 上是<a href="https://support.apple.com/zh-cn/HT204091">忽略此设备</a></p>
<hr>
<p>首先将 esp32-ble-keyboard 固件(<code>https://wwj718.github.io/post/img/esp32-ble-keyboard-20231118.bin</code>) 刷入 ESP32 板子(我用的是 ESP32 DEVKIT V1, 你也可以在其他 ESP32 板子上使用)。</p>
<p>通过 MicroBlocks 的 <code>显示高级积木 &gt; 从 URL 安装 ESP 固件</code> 来刷入固件。</p>
<p><img src="/post/img/install-esp-firmware-from-url.png" alt=""></p>
<p>安装完成后，打开 <a href="https://microblocksfun.cn/run/microblocks.html#project=projectName%20%27esp32-touch-pin%27%0A%0Amodule%20main%0Aauthor%20unknown%0Aversion%201%200%20%0Adescription%20%27%27%0Avariables%20test%20%0A%0Ascript%2041%2046%20%7B%0AwhenCondition%20%28%28%27%5Bsensors%3AtouchRead%5D%27%2012%29%20%3C%2050%29%0A%27press%20key%27%20%27n%27%0AwaitMillis%20500%0A%7D%0A%0Ascript%20263%2049%20%7B%0AwhenStarted%0A%27start%20BLE%20Keyboard%27%0A%7D%0A%0Ascript%2033%20230%20%7B%0Aforever%20%7B%0A%20%20printIt%20%28%27%5Bsensors%3AtouchRead%5D%27%2012%29%0A%20%20waitMillis%2050%0A%7D%0A%7D%0A%0Ascript%20260%20232%20%7B%0AsayIt%20%27touched%27%20test%0AsayIt%20%27%27%0Atest%20%2B%3D%201%0A%7D%0A%0A%0Amodule%20%27BLE%20Keyboard%27%20Comm%0Aauthor%20wwj718%0Aversion%201%200%20%0Achoices%20keyModifiers%20Shift%20Control%20%27Alt%20%2F%20%E2%8C%A5%27%20%27Logo%20%2F%20%E2%8C%98%27%20AltGr%20%0Achoices%20mouseButtons%20left%20right%20middle%20both%20%0Achoices%20specialKeys%20%27enter%3A10%27%20%27tab%3A179%27%20%27backspace%3A178%27%20%27delete%3A212%27%20%27insert%3A209%27%20%27home%3A210%27%20%27end%3A213%27%20%27PgUp%3A211%27%20%27PgDown%3A214%27%20%27%E2%86%92%3A215%27%20%27%E2%86%90%3A216%27%20%27%E2%86%93%3A217%27%20%27%E2%86%91%3A218%27%20%27F1%3A194%27%20%27F2%3A195%27%20%27F3%3A196%27%20%27F4%3A197%27%20%27F5%3A198%27%20%27F6%3A199%27%20%27F7%3A200%27%20%27F8%3A201%27%20%27F9%3A202%27%20%27F10%3A203%27%20%27F11%3A204%27%20%27F12%3A205%27%20%27CapsLock%3A193%27%20%27NumLock%3A219%27%20%27ScrollLock%3A207%27%20%27PrintScreen%3A206%27%20%27ESC%3A177%27%20%0Adescription%20%27This%20library%20can%20send%20keyboard%20events%20to%20a%20computer%20over%20Bluetooth%20%28i.e.%20it%20emulates%20a%20Bluetooth%20Keyboard%20device%29.%0AIt%20currently%20works%20on%20ESP32.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27start%20BLE%20Keyboard%27%20%27start%20BLE%20Keyboard%27%0A%20%20spec%20%27%20%27%20%27press%20key%27%20%27press%20key%20_%20%3A%20while%20holding%20_%27%20%27str.specialKeys%20menu.keyModifiers%27%20%27n%27%20%27Shift%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AholdKey%5D%27%20%27hold%20key%20_%27%20%27str.specialKeys%27%20%27A%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AreleaseKey%5D%27%20%27release%20key%20_%27%20%27str.specialKeys%27%20%27A%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AreleaseKeys%5D%27%20%27release%20all%20keys%27%0A%0Ato%20%27press%20key%27%20key%20modifier%20%7B%0A%20%20callCustomCommand%20%27%5Bnet%3APressKey%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20key%20%28%27%5Bdata%3Afind%5D%27%20modifier%20%28%27%5Bdata%3AmakeList%5D%27%20%27Shift%27%20%27Control%27%20%27Alt%20%2F%20%E2%8C%A5%27%20%27Logo%20%2F%20%E2%8C%98%27%20%27AltGr%27%29%29%29%0A%7D%0A%0Ato%20%27start%20BLE%20Keyboard%27%20%7B%0A%20%20callCustomCommand%20%27%5Bnet%3AstartKeyboard%5D%27%0A%7D%0A%0A%0Amodule%20%27Sensor%20Primitives%27%20Input%0Aauthor%20MicroBlocks%0Aversion%201%201%20%0Atags%20tilt%20acceleration%20light%20sensor%20capacitive%20button%20%0Adescription%20%27Provides%20blocks%20to%20read%20tilt%20in%20the%20three%20axes%2C%20acceleration%2C%20temperature%20and%20light%20level.%20Many%20boards%20come%20with%20this%20particular%20set%20of%20sensors%2C%20such%20as%20the%20micro%3Abit%2C%20the%20Circuit%20Playground%20Express%2C%20the%20Calliope%20or%20the%20Citilab%20ED1.%27%0A%0A%20%20spec%20%27r%27%20%27%5Bsensors%3AtiltX%5D%27%20%27tilt%20x%27%0A%20%20spec%20%27r%27%20%27%5Bsensors%3AtiltY%5D%27%20%27tilt%20y%27%0A%20%20spec%20%27r%27%20%27%5Bsensors%3AtiltZ%5D%27%20%27tilt%20z%27%0A%20%20spec%20%27r%27%20%27%5Bdisplay%3AlightLevel%5D%27%20%27light%20level%27%0A%20%20spec%20%27r%27%20%27%5Bsensors%3Atemperature%5D%27%20%27temperature%20%28%C2%B0C%29%27%0A%20%20space%0A%20%20spec%20%27r%27%20%27%5Bsensors%3AtouchRead%5D%27%20%27capacitive%20sensor%20_%27%20%27num%27%201%0A%20%20space%0A%20%20spec%20%27%20%27%20%27%5Bsensors%3Ai2cSetClockSpeed%5D%27%20%27set%20i2c%20clock%20speed%20_%27%20%27num%27%20400000%0A">这个程序</a></p>
<p>运行程序之后, 应该就能够搜索到蓝牙键盘: <code>ESP32 Keyboard</code></p>
<p>ESP32 的以下引脚支持 touch: <code>2, 4, 12, 13, 14, 15, 27, 32, 33</code></p>
<p><img src="/post/img/DOIT-ESP32-DEV-KIT.jpg" alt=""></p>
<p>如果你在操作中遇到问题, 可参考<a href="https://www.bilibili.com/video/BV1tN4y1S7g4?t=78.9">周六分享会的视频</a></p>
<h1 id="faq">FAQ</h1>
<h2 id="如何编译到其他-microblocks-支持的板子里">如何编译到其他 MicroBlocks 支持的板子里?</h2>
<p>以 m5stack 为例， 原先的配置：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[env:m5stack]
</span></span><span class="line"><span class="cl">platform = espressif32
</span></span><span class="line"><span class="cl">board = m5stack-core-esp32
</span></span><span class="line"><span class="cl">board_build.partitions = noota_3g.csv
</span></span><span class="line"><span class="cl">lib_deps =
</span></span><span class="line"><span class="cl">	Adafruit GFX Library
</span></span><span class="line"><span class="cl">	571 ; Adafruit ILI9341
</span></span><span class="line"><span class="cl">	Adafruit BusIO
</span></span><span class="line"><span class="cl">	WebSockets
</span></span><span class="line"><span class="cl">	256dpi/MQTT
</span></span><span class="line"><span class="cl">lib_ignore =
</span></span><span class="line"><span class="cl">	Adafruit STMPE610
</span></span><span class="line"><span class="cl">	Adafruit seesaw Library
</span></span><span class="line"><span class="cl">	Adafruit TouchScreen
</span></span></code></pre></td></tr></table>
</div>
</div><p>包含蓝牙键盘功能的配置：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[env:m5stack]
</span></span><span class="line"><span class="cl">platform = espressif32
</span></span><span class="line"><span class="cl">board = m5stack-core-esp32
</span></span><span class="line"><span class="cl">board_build.partitions = no_ota.csv
</span></span><span class="line"><span class="cl">build_flags = -D BLE_KEYBOARD -D USE_NIMBLE
</span></span><span class="line"><span class="cl">lib_deps =
</span></span><span class="line"><span class="cl">	Adafruit GFX Library
</span></span><span class="line"><span class="cl">	571 ; Adafruit ILI9341
</span></span><span class="line"><span class="cl">	Adafruit BusIO
</span></span><span class="line"><span class="cl">	WebSockets
</span></span><span class="line"><span class="cl">	256dpi/MQTT
</span></span><span class="line"><span class="cl">	t-vk/ESP32 BLE Keyboard@^0.3.2
</span></span><span class="line"><span class="cl">	NimBLE-Arduino
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">lib_ignore =
</span></span><span class="line"><span class="cl">	Adafruit STMPE610
</span></span><span class="line"><span class="cl">	Adafruit seesaw Library
</span></span><span class="line"><span class="cl">	Adafruit TouchScreen
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="使用-wifi-控制蓝牙键盘">使用 wifi 控制蓝牙键盘</h2>
<p>这是周六分享会分享过程中，李老师和汤老师提出的问题。</p>
<p><a href="https://microblocksfun.cn/run/microblocks.html#project=projectName%20%27WiFI%20radio%20demo%27%0A%0Amodule%20main%0Aauthor%20unknown%0Aversion%201%200%20%0Adescription%20%27%27%0Avariables%20test%20message%20%0A%0A%20%20spec%20%27r%27%20%27password%27%20%27password%27%0A%0Ato%20password%20%7B%0A%20%20return%20%27zkshdehv%27%0A%7D%0A%0Ascript%2054%2033%20%7B%0AwhenStarted%0AwifiConnect%20%27Network_Name%27%20%27%27%0A%27start%20BLE%20Keyboard%27%0Aforever%20%7B%0A%20%20if%20%28wifiRadio_messageReceived%29%20%7B%0A%20%20%20%20message%20%3D%20%28wifiRadio_receivedString%29%0A%20%20%20%20%27press%20key%27%20message%0A%20%20%20%20sayIt%20message%0A%20%20%7D%0A%20%20waitMillis%2050%0A%7D%0A%7D%0A%0A%0Amodule%20%27BLE%20Keyboard%27%20Comm%0Aauthor%20wwj718%0Aversion%201%200%20%0Achoices%20keyModifiers%20Shift%20Control%20%27Alt%20%2F%20%E2%8C%A5%27%20%27Logo%20%2F%20%E2%8C%98%27%20AltGr%20%0Achoices%20mouseButtons%20left%20right%20middle%20both%20%0Achoices%20specialKeys%20%27enter%3A10%27%20%27tab%3A179%27%20%27backspace%3A178%27%20%27delete%3A212%27%20%27insert%3A209%27%20%27home%3A210%27%20%27end%3A213%27%20%27PgUp%3A211%27%20%27PgDown%3A214%27%20%27%E2%86%92%3A215%27%20%27%E2%86%90%3A216%27%20%27%E2%86%93%3A217%27%20%27%E2%86%91%3A218%27%20%27F1%3A194%27%20%27F2%3A195%27%20%27F3%3A196%27%20%27F4%3A197%27%20%27F5%3A198%27%20%27F6%3A199%27%20%27F7%3A200%27%20%27F8%3A201%27%20%27F9%3A202%27%20%27F10%3A203%27%20%27F11%3A204%27%20%27F12%3A205%27%20%27CapsLock%3A193%27%20%27NumLock%3A219%27%20%27ScrollLock%3A207%27%20%27PrintScreen%3A206%27%20%27ESC%3A177%27%20%0Adescription%20%27This%20library%20can%20send%20keyboard%20events%20to%20a%20computer%20over%20Bluetooth%20%28i.e.%20it%20emulates%20a%20Bluetooth%20Keyboard%20device%29.%0AIt%20currently%20works%20on%20ESP32.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27start%20BLE%20Keyboard%27%20%27start%20BLE%20Keyboard%27%0A%20%20spec%20%27%20%27%20%27press%20key%27%20%27press%20key%20_%20%3A%20while%20holding%20_%27%20%27str.specialKeys%20menu.keyModifiers%27%20%27n%27%20%27Shift%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AholdKey%5D%27%20%27hold%20key%20_%27%20%27str.specialKeys%27%20%27A%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AreleaseKey%5D%27%20%27release%20key%20_%27%20%27str.specialKeys%27%20%27A%27%0A%20%20spec%20%27%20%27%20%27%5Bnet%3AreleaseKeys%5D%27%20%27release%20all%20keys%27%0A%0Ato%20%27press%20key%27%20key%20modifier%20%7B%0A%20%20callCustomCommand%20%27%5Bnet%3APressKey%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20key%20%28%27%5Bdata%3Afind%5D%27%20modifier%20%28%27%5Bdata%3AmakeList%5D%27%20%27Shift%27%20%27Control%27%20%27Alt%20%2F%20%E2%8C%A5%27%20%27Logo%20%2F%20%E2%8C%98%27%20%27AltGr%27%29%29%29%0A%7D%0A%0Ato%20%27start%20BLE%20Keyboard%27%20%7B%0A%20%20callCustomCommand%20%27%5Bnet%3AstartKeyboard%5D%27%0A%7D%0A%0A%0Amodule%20WiFi%20Comm%0Aauthor%20MicroBlocks%0Aversion%201%206%20%0Atags%20communication%20network%20%0Adescription%20%27Connect%20to%20a%20WiFi%20network.%20Used%20in%20conjunction%20with%20other%20network%20libraries%2C%20such%20as%20HTTP%20client%2C%20HTTP%20server%20or%20Web%20Thing.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27wifiConnect%27%20%27wifi%20connect%20to%20_%20password%20_%20%3A%20IP%20_%20gateway%20_%20subnet%20_%27%20%27str%20str%20auto%20auto%20auto%27%20%27Network_Name%27%20%27%27%20%27192.168.1.42%27%20%27192.168.1.1%27%20%27255.255.255.0%27%0A%20%20spec%20%27%20%27%20%27wifiCreateHotspot%27%20%27wifi%20create%20hotspot%20_%20password%20_%27%20%27str%20str%27%20%27Network_Name%27%20%27Network_Password%27%0A%20%20spec%20%27r%27%20%27getIPAddress%27%20%27IP%20address%27%0A%20%20spec%20%27r%27%20%27%5Bnet%3AmyMAC%5D%27%20%27MAC%20address%27%0A%0Ato%20getIPAddress%20%7B%0A%20%20return%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0Ato%20wifiConnect%20ssid%20password%20fixedIP%20gatewayIP%20subnetIP%20%7B%0A%20%20if%20%28not%20%28%27%5Bnet%3AhasWiFi%5D%27%29%29%20%7Breturn%7D%0A%20%20%27%5Bnet%3AstopWiFi%5D%27%0A%20%20if%20%28%28pushArgCount%29%20%3C%205%29%20%7B%0A%20%20%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%20false%20fixedIP%20gatewayIP%20subnetIP%0A%20%20%7D%0A%20%20local%20%27startMSecs%27%20%28millisOp%29%0A%20%20repeatUntil%20%28%28%27%5Bnet%3AmyIPAddress%5D%27%29%20%21%3D%20%270.0.0.0%27%29%20%7B%0A%20%20%20%20comment%20%27Timeout%20after%20N%20seconds%27%0A%20%20%20%20if%20%28%28%28millisOp%29%20-%20startMSecs%29%20%3E%2030000%29%20%7B%0A%20%20%20%20%20%20sayIt%20%27Could%20not%20connect%27%0A%20%20%20%20%20%20return%200%0A%20%20%20%20%7D%0A%20%20%20%20comment%20%27Slow%20blink%20while%20trying%20to%20connect%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%20300%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%20300%0A%20%20%7D%0A%20%20repeat%206%20%7B%0A%20%20%20%20comment%20%27Quick%20blinks%20when%20connected%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%2050%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%2050%0A%20%20%7D%0A%20%20sayIt%20%27My%20IP%20address%20is%3A%27%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0Ato%20wifiCreateHotspot%20ssid%20password%20%7B%0A%20%20if%20%28not%20%28%27%5Bnet%3AhasWiFi%5D%27%29%29%20%7Breturn%7D%0A%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%20true%0A%20%20if%20%28%27Connected%27%20%21%3D%20%28%27%5Bnet%3AwifiStatus%5D%27%29%29%20%7B%0A%20%20%20%20sayIt%20%27Could%20not%20create%20hotspot%27%0A%20%20%20%20return%200%0A%20%20%7D%0A%20%20repeat%206%20%7B%0A%20%20%20%20comment%20%27Quick%20blinks%20when%20connected%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%2050%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%2050%0A%20%20%7D%0A%20%20sayIt%20%27My%20IP%20address%20is%3A%27%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0A%0Amodule%20%27WiFi%20Radio%27%20Comm%0Aauthor%20MicroBlocks%0Aversion%201%201%20%0Adepends%20WiFi%20%0Atags%20radio%20communication%20messaging%20network%20%0Adescription%20%27This%20library%20supports%20easy%20message%20exchange%20among%20WiFi-enabled%20boards%20on%20the%20same%20network.%0A%0AA%20message%20can%20contain%20a%20string%2C%20a%20number%2C%20or%20both.%20Messages%20are%20received%20by%20all%20boards%20in%20the%20same%20radio%20group%20as%20the%20sender.%0A%0AThis%20library%20is%20similar%20to%20the%20Radio%20library%2C%20but%20messages%20are%20sent%20via%20UDP%20over%20WiFi%20instead%20of%20the%20Nordic%20radio%20system.%20Since%20UDP%20supports%20larger%20packets%2C%20this%20library%20can%20send%20longer%20strings.%0A%0AThis%20library%20can%20only%20communicate%20with%20other%20boards%20that%20support%20WiFi%3B%20it%20cannot%20interoperate%20with%20Nordic-based%20boards%20like%20the%20micro%3Abit.%0A%27%0Avariables%20_wifiRadio_Started%20_wifiRadio_group%20_wifiRadio_lastNumber%20_wifiRadio_lastString%20%0A%0A%20%20spec%20%27%20%27%20%27wifiRadio_sendNumber%27%20%27wifi%20send%20number%20_%27%20%27num%27%20123%0A%20%20spec%20%27%20%27%20%27wifiRadio_sendString%27%20%27wifi%20send%20string%20_%27%20%27str%27%20%27Hello%21%27%0A%20%20spec%20%27%20%27%20%27wifiRadio_sendPair%27%20%27wifi%20send%20pair%20_%20%3D%20_%27%20%27str%20num%27%20%27light%27%2010%0A%20%20space%0A%20%20spec%20%27r%27%20%27wifiRadio_messageReceived%27%20%27wifi%20message%20received%3F%27%0A%20%20spec%20%27r%27%20%27wifiRadio_receivedInteger%27%20%27wifi%20last%20number%27%0A%20%20spec%20%27r%27%20%27wifiRadio_receivedString%27%20%27wifi%20last%20string%27%0A%20%20space%0A%20%20spec%20%27%20%27%20%27wifiRadio_setGroup%27%20%27wifi%20set%20group%20_%20%280-255%29%27%20%27num%27%200%0A%20%20space%0A%20%20spec%20%27%20%27%20%27_wifiRadio_init%27%20%27_wifiRadio_init%27%0A%0Ato%20%27_wifiRadio_init%27%20%7B%0A%20%20comment%20%27Open%20WiFi%20Radio%20UDP%20port%20if%20necessary.%27%0A%20%20if%20%28not%20_wifiRadio_Started%29%20%7B%0A%20%20%20%20%27%5Bnet%3AudpStart%5D%27%2034567%0A%20%20%20%20_wifiRadio_group%20%3D%200%0A%20%20%20%20_wifiRadio_Started%20%3D%20true%0A%20%20%7D%0A%7D%0A%0Ato%20wifiRadio_messageReceived%20%7B%0A%20%20%27_wifiRadio_init%27%0A%20%20local%20%27msg%27%20%28%27%5Bnet%3AudpReceivePacket%5D%27%20true%29%0A%20%20if%20%28%28size%20msg%29%20%3C%208%29%20%7B%0A%20%20%20%20return%20%28booleanConstant%20false%29%0A%20%20%7D%0A%20%20if%20%28not%20%28and%20%28%28at%201%20msg%29%20%3D%3D%2077%29%20%28and%20%28%28at%202%20msg%29%20%3D%3D%2066%29%20%28%28at%203%20msg%29%20%3D%3D%2082%29%29%29%29%20%7B%0A%20%20%20%20return%20%28booleanConstant%20false%29%0A%20%20%7D%0A%20%20if%20%28%28at%204%20msg%29%20%21%3D%20_wifiRadio_group%29%20%7B%0A%20%20%20%20return%20%28booleanConstant%20false%29%0A%20%20%7D%0A%20%20_wifiRadio_lastNumber%20%3D%20%28%28at%205%20msg%29%20%7C%20%28%28%28at%206%20msg%29%20%3C%3C%208%29%20%7C%20%28%28%28at%207%20msg%29%20%3C%3C%2016%29%20%7C%20%28%28at%208%20msg%29%20%3C%3C%2024%29%29%29%29%0A%20%20_wifiRadio_lastString%20%3D%20%28%27%5Bdata%3Ajoin%5D%27%20%27%27%20%28%27%5Bdata%3AcopyFromTo%5D%27%20msg%209%29%29%0A%20%20return%20%28booleanConstant%20true%29%0A%7D%0A%0Ato%20wifiRadio_receivedInteger%20%7B%0A%20%20return%20_wifiRadio_lastNumber%0A%7D%0A%0Ato%20wifiRadio_receivedString%20%7B%0A%20%20if%20%28_wifiRadio_lastString%20%3D%3D%200%29%20%7B_wifiRadio_lastString%20%3D%20%27%27%7D%0A%20%20return%20_wifiRadio_lastString%0A%7D%0A%0Ato%20wifiRadio_sendNumber%20n%20%7B%0A%20%20wifiRadio_sendPair%20%27%27%20n%0A%7D%0A%0Ato%20wifiRadio_sendPair%20s%20n%20%7B%0A%20%20%27_wifiRadio_init%27%0A%20%20local%20%27msg%27%20%28%27%5Bdata%3AnewByteArray%5D%27%208%29%0A%20%20comment%20%27MicroBlocks%20WiFi%20Radio%20message%20format%3A%0A%20%20tag%3A%20%27%27MBR%27%27%20%283%20bytes%29%0A%20%20group%20%281%20byte%29%0A%20%20number%2C%20LSB%20%284%20bytes%29%0A%20%20utf8%20string%20datat%20%28variable%20length%29%27%0A%20%20atPut%201%20msg%2077%0A%20%20atPut%202%20msg%2066%0A%20%20atPut%203%20msg%2082%0A%20%20atPut%204%20msg%20_wifiRadio_group%0A%20%20atPut%205%20msg%20%28n%20%26%20255%29%0A%20%20atPut%206%20msg%20%28%28n%20%3E%3E%208%29%20%26%20255%29%0A%20%20atPut%207%20msg%20%28%28n%20%3E%3E%2016%29%20%26%20255%29%0A%20%20atPut%208%20msg%20%28%28n%20%3E%3E%2024%29%20%26%20255%29%0A%20%20msg%20%3D%20%28%27%5Bdata%3Ajoin%5D%27%20msg%20%28%27%5Bdata%3AasByteArray%5D%27%20s%29%29%0A%20%20comment%20%27Broadcast%20msg%20to%20the%20WiFi%20Radio%20port%20number%20on%20all%20boards%20on%20the%20WiFi%20network.%27%0A%20%20%27%5Bnet%3AudpSendPacket%5D%27%20msg%20%27255.255.255.255%27%2034567%0A%7D%0A%0Ato%20wifiRadio_sendString%20s%20%7B%0A%20%20wifiRadio_sendPair%20s%200%0A%7D%0A%0Ato%20wifiRadio_setGroup%20n%20%7B%0A%20%20%27_wifiRadio_init%27%0A%20%20_wifiRadio_group%20%3D%20n%0A%7D%0A%0A">示例项目</a></p>
<p>你可以使用另一个板子发送 WiFi Radio 消息， 也可以使用 Python 发送消息(<a href="https://github.com/wwj718/microblocks_wifi_radio">microblocks_wifi_radio</a>)。</p>
<h2 id="如何将-esp32-作为蓝牙主机-连接市面上的主流游戏手柄">如何将 esp32 作为蓝牙主机, 连接市面上的主流游戏手柄?</h2>
<p>这超出了本文的范畴。</p>
<p>要做到这点, 可以通过将 <a href="https://bluepad32.readthedocs.io/en/latest/">Bluepad32</a> 移植到 MicroBlocks vm 中, 具体而言, 需要移植的主要是<a href="https://github.com/ricardoquesada/esp-idf-arduino-bluepad32-template/blob/main/main/sketch.cpp">这些代码</a></p>
<h1 id="参考">参考</h1>
<ul>
<li><a href="https://makeymakey.com/">Makey Makey</a></li>
<li><a href="https://bitbucket.org/john_maloney/smallvm/issues/439/how-to-use-capacitive-sensor-block">how to use capacitive sensor block</a></li>
<li>MicroBlocks Touch, Touch(esp32) library</li>
<li><a href="https://github.com/wwj718/microblocks_wifi_radio">microblocks_wifi_radio</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">种瓜</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2023-11-18
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/microblocks/">MicroBlocks</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E7%BC%96%E7%A8%8B/scratch-link-extensions-to-snap/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">将基于 Scratch Link 的插件迁移到 Snap!</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E7%BC%96%E7%A8%8B/snap-websocket-prims/">
            <span class="next-text nav-default">Snap! websocket 驱动库</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-out-me" title="out-me"></a>
      <a href="https://github.com/wwj718" class="iconfont icon-github" title="github"></a>
  <a href="http://wwj718.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  
  <span><a target="_blank" href="https://cn.bing.com/search?q=site%3Awwj718.github.io%20%20codelab-adapter">搜索本站</a></span>
  <span class="division">|</span>
  <span><a target="_blank" href="/index.xml">RSS订阅</a></span>
  <span class="division">|</span>
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2013 - 
    2024<span class="heart"><i class="iconfont icon-heart"></i></span><span>种瓜</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="/post/img/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="/post/img/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="/post/img/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?18db4b662c04fbd6cc2851d246c51b3f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>






</body>
</html>
