<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>edx search analysis - 夜行人</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="种瓜" /><meta name="description" content="关于如何在Open edX中启用搜索特性可以参考我此前的评测文章:Open edX最新版评测与新特性探索(20151214) 官方也给出了这个特性" /><meta name="keywords" content="education, programming, Technology" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="http://wwj718.github.io/post/edx/edx-search-analysis/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.69e0bbe2419d9b0efbdcc1d3b4338bba03a6f6789ae2832bc1af58e5b2757470.css" rel="stylesheet">
<link rel="stylesheet" href="/post/img/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="edx search analysis" />
<meta property="og:description" content="关于如何在Open edX中启用搜索特性可以参考我此前的评测文章:Open edX最新版评测与新特性探索(20151214) 官方也给出了这个特性" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://wwj718.github.io/post/edx/edx-search-analysis/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-01-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2016-01-20T00:00:00+00:00" />

<meta itemprop="name" content="edx search analysis">
<meta itemprop="description" content="关于如何在Open edX中启用搜索特性可以参考我此前的评测文章:Open edX最新版评测与新特性探索(20151214) 官方也给出了这个特性"><meta itemprop="datePublished" content="2016-01-20T00:00:00+00:00" />
<meta itemprop="dateModified" content="2016-01-20T00:00:00+00:00" />
<meta itemprop="wordCount" content="3798">
<meta itemprop="keywords" content=" edx," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="edx search analysis"/>
<meta name="twitter:description" content="关于如何在Open edX中启用搜索特性可以参考我此前的评测文章:Open edX最新版评测与新特性探索(20151214) 官方也给出了这个特性"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">夜行人</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/post/%E9%9A%8F%E7%AC%94/aboutme/">
        <li class="mobile-menu-item">About-Me</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">夜行人</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/%E9%9A%8F%E7%AC%94/aboutme/">About-Me</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">edx search analysis</h1>

      <div class="post-meta">
        <span class="post-time"> 2016-01-20 </span>
        <div class="post-category">
            <a href="/categories/edx/"> edx </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents"></nav>
  </div>
</div>
    <div class="post-content">
      <p>关于如何在Open edX中启用搜索特性可以参考我此前的评测文章:<a href="http://blog.just4fun.site/try-open-edx-master-20151214.html">Open edX最新版评测与新特性探索(20151214)</a></p>
<p>官方也给出了这个特性的介绍：<a href="http://edx.readthedocs.org/projects/open-edx-learner-guide/en/latest/SFD_course_search.html">Searching the Course</a></p>
<p>以及技术文档：<a href="http://edx.readthedocs.org/projects/edx-installing-configuring-and-running/en/latest/configuration/edx_search.html">Enabling Open edX Search</a>,如你所料，它一如既往地变更频繁和不够完备。怎么说呢，如果你和我一样乐观，你大概会觉得这是好事吧，它意味着这个项目在被持续、迅猛地推进</p>
<p>#Ready
关于edx search（这里重点谈论的是课程/内容搜索相关的部分），我们有个很有趣的想法，为了实现它，我们需要深入了解这个机制。而后在网上发现一些人也需要深度定制它。所以我将自己的分析过程分享出来，抛装引玉。也许能引来有趣的讨论，也许能帮到后来者，也许能给自己以启发</p>
<p>#Go
###资源汇集
首先我们把能找到的资源进行汇集</p>
<ul>
<li><a href="https://github.com/edx/edx-search">edx-search</a>:edx-search源码</li>
<li><a href="https://github.com/edx/edx-platform/tree/named-release/dogwood.rc/lms/lib/courseware_search">courseware_search</a>:lms中相关源码</li>
<li><a href="http://edx.readthedocs.org/projects/edx-installing-configuring-and-running/en/latest/configuration/edx_search.html">Enabling Open edX Search</a>：文档</li>
<li><a href="http://edx.readthedocs.org/projects/open-edx-learner-guide/en/latest/SFD_course_search.html">Searching the Course</a>:用户手册</li>
</ul>
<p>###阅读技术文档
通过阅读文档，我们大致了解了设计相关的信息：</p>
<ul>
<li><a href="https://github.com/edx/edx-search">edx-search</a>本质上是一个 Django application，用于与edx-platform通信</li>
<li>搜索的过程是通过先创建索引，然后在索引里检索匹配信息，如果你熟悉ElasticSearch，你会觉得这个过程理所当然</li>
<li>Python包依赖：Django、pyMongo、<a href="https://github.com/newvem/pytz">pytz</a>、elasticsearch</li>
<li>索引数据由index_dictionary()方法决定，当前被索引的数据有：
<ul>
<li>Sequence</li>
<li>Vertical</li>
<li>Video</li>
<li>HTML Block</li>
<li>也包括课程元信息，包括课程名、课程描述、以及课程开始、结束时间</li>
</ul>
</li>
<li>LMS和CMS里有好些可开启的开关和可定制的信息，我摘录几个觉得重要的：
<ul>
<li>指定引擎：SEARCH_ENGINE，当前支持ElasticSearchEngine和MockSearchEngine</li>
<li>增加可搜索信息：ELASTIC_FIELD_MAPPINGS，该对象是一个自定，可自定拓展</li>
<li>如果你想深度定制搜索：SEARCH_INITIALIZER、SEARCH_RESULT_PROCESSOR和SEARCH_FILTER_GENERATOR会是有用的接口</li>
</ul>
</li>
</ul>
<p>进一步分析edx相关的库我们可以了解到</p>
<ul>
<li>edx中写搜索相关的业务逻辑，使用<a href="https://github.com/elastic/elasticsearch-py">elasticsearch-py</a>来操作elasticsearch</li>
<li>edx的搜索用到了ElasticSearch，通过查阅<a href="https://github.com/edx/configuration/">edx/configuration</a>,我们发现Birch、Cypress和Dogwood使用的版本都是0.90.11</li>
</ul>
<p>###定制思路
通过前头的初步分析（注意我们还没有进入源码！我们已经初步了解课程搜索相关的设计了，可见阅读文档的重要性），我们大致知道了可以通过实现接口来实现自己的搜索逻辑，其中有三个接口是关键的，包括：</p>
<ul>
<li>SEARCH_INITIALIZER，源码见<a href="https://github.com/edx/edx-platform/blob/named-release/dogwood.rc/lms/lib/courseware_search/lms_search_initializer.py#L15">LmsSearchInitializer</a>
<ul>
<li><code>lms.lib.courseware_search.lms_search_initializer.LmsSearchInitializer</code></li>
</ul>
</li>
<li>SEARCH_RESULT_PROCESSOR,源码见<a href="https://github.com/edx/edx-platform/blob/named-release/dogwood.rc/lms/lib/courseware_search/lms_result_processor.py#L15">LmsSearchResultProcessor</a>
<ul>
<li><code>lms.lib.courseware_search.lms_result_processor.LmsSearchResultProcessor</code></li>
</ul>
</li>
<li>SEARCH_FILTER_GENERATOR,源码见<a href="https://github.com/edx/edx-platform/blob/named-release/dogwood.rc/lms/lib/courseware_search/lms_filter_generator.py#L17">LmsSearchFilterGenerator</a>
<ul>
<li><code>lms.lib.courseware_search.lms_filter_generator.LmsSearchFilterGenerato」r</code></li>
</ul>
</li>
</ul>
<p>###眼见为实
我们首先将devstack跑起来（实际上是在生产环境下）：
<code>sudo -u www-data /edx/bin/python.edxapp /edx/app/edxapp/edx-platform/manage.py lms runserver 0.0.0.0:5000 --settings devstack</code></p>
<p>课程搜索包括三个部分：</p>
<ul>
<li>course discovery</li>
<li>all course search</li>
<li>single course search</li>
</ul>
<p>首先是course discovery，我们据此来搜索需要的课程
<img src="/img/edx/search/course_discovery0.png" alt="course_discovery0"></p>
<p>通过调试面板来看看实际的请求时怎样的
<img src="/img/edx/search/course_discovery1.png" alt="course_discovery1"></p>
<p>搜索实际是一个RESTful 风格的API，以ajax的方式整合到页面里，我们稍后会跟踪这个接口</p>
<p>我们接着看看all course search部分
<img src="/img/edx/search/all_course_search0.png" alt="all_course_search0.png"></p>
<p>同样打开调试面板
<img src="/img/edx/search/all_course_search1.png" alt="all_course_search1.png"></p>
<p>我们可以看到接口的url，以POST方式发送搜索请求</p>
<p>随时来看看课程被的搜索（single course search）</p>
<p><img src="/img/edx/search/single_course_search0.png" alt="single_course_search0.png"></p>
<p>观察调试面板可以发现，实际是以以POST方式请求http://ip:5000/search/course-v1:edX+DemoX+Demo_Course</p>
<p>response为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;access_denied_count&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nt">&#34;total&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nt">&#34;max_score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span><span class="p">,</span> <span class="nt">&#34;took&#34;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="nt">&#34;results&#34;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&#34;_type&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_content&#34;</span><span class="p">,</span> <span class="nt">&#34;score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span><span class="p">,</span> <span class="nt">&#34;_index&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_index&#34;</span><span class="p">,</span> <span class="nt">&#34;_score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span><span class="p">,</span> <span class="nt">&#34;_id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span><span class="p">,</span> <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;course_name&#34;</span><span class="p">:</span> <span class="s2">&#34;edX Demonstration Course&#34;</span><span class="p">,</span> <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;/courses/course-v1:edX+DemoX+Demo_Course/jump_to/block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span><span class="p">,</span> <span class="nt">&#34;excerpt&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;b&gt;Lab&lt;/b&gt;s and Demos Professors that create courses on edX are able to&#34;</span><span class="p">,</span> <span class="nt">&#34;start_date&#34;</span><span class="p">:</span> <span class="s2">&#34;2013-02-05T00:00:00+00:00&#34;</span><span class="p">,</span> <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;html_content&#34;</span><span class="p">:</span> <span class="s2">&#34;Labs and Demos Professors that create courses on edX are able to implement highly interactive experiences that allow you as a student to experiment using easy to use online web applications. These labs are customized to each class and subject area. We have collected a couple of the more popular lab environments here for you to experience and play with. Please be patient with yourself as you take a look around at these lab environments. You probably will not be able to answer these questions without taking a course on the topic first! &#34;</span><span class="p">,</span> <span class="nt">&#34;display_name&#34;</span><span class="p">:</span> <span class="s2">&#34;Labs and Demos&#34;</span><span class="p">},</span> <span class="nt">&#34;course&#34;</span><span class="p">:</span> <span class="s2">&#34;course-v1:edX+DemoX+Demo_Course&#34;</span><span class="p">,</span> <span class="nt">&#34;location&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Example Week 2: Get Interactive&#34;</span><span class="p">,</span> <span class="s2">&#34;Homework - Labs and Demos&#34;</span><span class="p">,</span> <span class="s2">&#34;Labs and Demos&#34;</span><span class="p">],</span> <span class="nt">&#34;content_type&#34;</span><span class="p">:</span> <span class="s2">&#34;Text&#34;</span><span class="p">,</span> <span class="nt">&#34;org&#34;</span><span class="p">:</span> <span class="s2">&#34;edX&#34;</span><span class="p">,</span> <span class="nt">&#34;content_groups&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span><span class="p">}},</span> <span class="p">{</span><span class="nt">&#34;_type&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_content&#34;</span><span class="p">,</span> <span class="nt">&#34;score&#34;</span><span class="p">:</span> <span class="mf">0.16797835</span><span class="p">,</span> <span class="nt">&#34;_index&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_index&#34;</span><span class="p">,</span> <span class="nt">&#34;_score&#34;</span><span class="p">:</span> <span class="mf">0.16797835</span><span class="p">,</span> <span class="nt">&#34;_id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span><span class="p">,</span> <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;course_name&#34;</span><span class="p">:</span> <span class="s2">&#34;edX Demonstration Course&#34;</span><span class="p">,</span> <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;/courses/course-v1:edX+DemoX+Demo_Course/jump_to/block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span><span class="p">,</span> <span class="nt">&#34;excerpt&#34;</span><span class="p">:</span> <span class="s2">&#34;There are no responses that need to be checked.In the &lt;b&gt;lab&lt;/b&gt; below, you&#34;</span><span class="p">,</span> <span class="nt">&#34;start_date&#34;</span><span class="p">:</span> <span class="s2">&#34;1970-01-01T05:00:00+00:00&#34;</span><span class="p">,</span> <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&#34;html_content&#34;</span><span class="p">:</span> <span class="s2">&#34;MOSFET AMPLIFIER EXPERIMENTThis demonstration is to develop your intuition about amplifiers and biasing, and to have fun with music! There are no responses that need to be checked.In the lab below, you will find:A circuit schematic of the MOSFET amplifier. You can use the sliders to the left of the circuit to control various parameters of the MOSFET and the amplifier.A plot (as a function of time) of selected voltages from the amplifier circuit. You can select the input waveform (e.g., sine wave, square wave, various types of music) by using the \\(v_\\mathrm{IN}\\) drop-down menu and the associated sliders. (The parameter \\(V_\\mathrm{MAX}\\) sets the maximum range on the plots.)The \&#34;Play\&#34; button which lets you listen to the selected voltage waveform as sound. Try it out!Listen to:vINvOUTvRGraph:vINvOUTvRvIN:Zero InputUnit ImpulseUnit StepSine WaveSquare WaveClassical MusicFolk MusicJazz MusicReggae MusicYour browser must support the Canvas element and have JavaScript enabled to view this tool.Your browser must support the Canvas element and have JavaScript enabled to view this tool.Experiment 1: Distorted outputBegin by selecting a sine wave input in the drop-down menu for \\(v_\\mathrm{IN}\\). Then, adjust the sliders to the baseline (default) setting shown below.Baseline setting of sliders:Peak to peak voltage: \\(v_\\mathrm{IN}=3~\\mathrm{V}\\),Frequency: \\(f = 1000~\\mathrm{Hz}\\),Supply voltage: \\(V_\\mathrm{S}=1.6~\\mathrm{V}\\),Input bias voltage: \\(V_\\mathrm{BIAS}=2.5~\\mathrm{V}\\),Pull-up resistor: \\(R = 10~\\mathrm{k}\\Omega\\),MOSFET parameter: \\(K=\\frac{1~\\mathrm{mA}}{\\mathrm{V}^2}\\),MOSFET threshold voltage: \\(V_\\mathrm{T} = 1~\\mathrm{V}\\),Vertical plot range: \\(V_\\mathrm{MAX} = 2~\\mathrm{V}\\).You should observe in the plot that with the baseline settings, the amplifier produces a distorted sine wave signal for \\(v_{OUT}\\). Next, go ahead and select one of the music signals as the input and listen to each of \\(v_{IN}\\) and \\(v_{OUT}\\), and confirm for yourself that the output sounds degraded at the chosen slider settings. You will notice that the graph now plots the music signal waveforms. Think about the reasons why the amplifier is producing a distorted output.Experiment 2: Linear regimeWe now study the amplifier&#39;s small signal behavior. Select a sine wave as the input signal. To study the small signal behavior, reduce the value of \\(v_{IN}\\) to 0.1V (peak-to-peak) by using the \\(v_{IN}\\) slider. Keeping the rest of the parameters at their baseline settings, derive an appropriate value of \\(V_{BIAS}\\) that will ensure saturation region operation for the MOSFET for the 0.1V peak-to-peak swing for \\(v_{IN}\\). Make sure to think about both positive and negative excursions of the signals.Next, use the \\(V_{BIAS}\\) slider to choose your computed value for \\(V_{BIAS}\\) and see if the observed plot of \\(v_{OUT}\\) is more-or-less distortion free. If your calculation was right, then the output will indeed be distortion free.Next, select one of the music signals as the input and listen to each of \\(v_{IN}\\) and \\(v_{OUT}\\), and confirm for yourself that the output sounds much better than in Experiment 1. Also, based on sound volume, convince yourself that \\(v_{OUT}\\) is an amplified version of \\(v_{IN}\\).Experiment 3: Your settingsNow go ahead and experiment with various other settings while listening to the music signal at \\(v_{OUT}\\). Observe the plots and listen to \\(v_{OUT}\\) as you change, for example, the bias voltage \\(V_{BIAS}\\). You will notice that the amplifier distorts the input signal when \\(V_{BIAS}\\) becomes too small, or when it becomes too large. You can also experiment with various values of \\(v_{IN}\\), \\(R_{L}\\), etc., and see how they affect the amplification and distortion.&#34;</span><span class="p">,</span> <span class="nt">&#34;display_name&#34;</span><span class="p">:</span> <span class="s2">&#34;Electronic Sound Experiment&#34;</span><span class="p">},</span> <span class="nt">&#34;course&#34;</span><span class="p">:</span> <span class="s2">&#34;course-v1:edX+DemoX+Demo_Course&#34;</span><span class="p">,</span> <span class="nt">&#34;location&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Example Week 2: Get Interactive&#34;</span><span class="p">,</span> <span class="s2">&#34;Lesson 2 - Let&#39;s Get Interactive!&#34;</span><span class="p">,</span> <span class="s2">&#34;Electronic Sound Experiment&#34;</span><span class="p">],</span> <span class="nt">&#34;content_type&#34;</span><span class="p">:</span> <span class="s2">&#34;Text&#34;</span><span class="p">,</span> <span class="nt">&#34;org&#34;</span><span class="p">:</span> <span class="s2">&#34;edX&#34;</span><span class="p">,</span> <span class="nt">&#34;content_groups&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span><span class="p">}}]}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>###做个试验
使用httpie做实验，在里我们从外部发起请求，ajax的方式让人不方便直接观察数据，而且总感觉耦合在一起，不干净</p>
<p><code>http -f POST http://209.9.106.99:5000/search/course-v1:edX+DemoX+Demo_Course search_string=edx page_size=20 page_index=0 'Cookie:sessionid=pzjqyf6kdoo8jj96ng753xhr1isvstm3;csrftoken=sjPry3O5UpFFp3N3izrIVvd9ZMDEWA7V' X-CSRFToken:sjPry3O5UpFFp3N3izrIVvd9ZMDEWA7V</code></p>
<p>url的格式为 DEMAIN/search/&lt;COURSE_ID&gt;</p>
<p>返回为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;access_denied_count&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;max_score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;results&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_index&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_index&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_type&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_content&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;display_name&#34;</span><span class="p">:</span> <span class="s2">&#34;Labs and Demos&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;html_content&#34;</span><span class="p">:</span> <span class="s2">&#34;Labs and Demos Professors that create courses on edX are able to implement highly interactive experiences that allow you as a student to experiment using easy to use online web applications. These labs are customized to each class and subject area. We have collected a couple of the more popular lab environments here for you to experience and play with. Please be patient with yourself as you take a look around at these lab environments. You probably will not be able to answer these questions without taking a course on the topic first! &#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content_groups&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content_type&#34;</span><span class="p">:</span> <span class="s2">&#34;Text&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;course&#34;</span><span class="p">:</span> <span class="s2">&#34;course-v1:edX+DemoX+Demo_Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;course_name&#34;</span><span class="p">:</span> <span class="s2">&#34;edX Demonstration Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;excerpt&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;b&gt;Lab&lt;/b&gt;s and Demos Professors that create courses on edX are able to&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;location&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Example Week 2: Get Interactive&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Homework - Labs and Demos&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Labs and Demos&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;org&#34;</span><span class="p">:</span> <span class="s2">&#34;edX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;start_date&#34;</span><span class="p">:</span> <span class="s2">&#34;2013-02-05T00:00:00+00:00&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;/courses/course-v1:edX+DemoX+Demo_Course/jump_to/block-v1:edX+DemoX+Demo_Course+type@html+block@2bee8c4248e842a19ba1e73ed8d426c2&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;score&#34;</span><span class="p">:</span> <span class="mf">0.6223112</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_index&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_index&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_score&#34;</span><span class="p">:</span> <span class="mf">0.16797835</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;_type&#34;</span><span class="p">:</span> <span class="s2">&#34;courseware_content&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;data&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;display_name&#34;</span><span class="p">:</span> <span class="s2">&#34;Electronic Sound Experiment&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&#34;html_content&#34;</span><span class="p">:</span> <span class="s2">&#34;MOSFET AMPLIFIER EXPERIMENTThis demonstration is to develop your intuition about amplifiers and biasing, and to have fun with music! There are no responses that need to be checked.In the lab below, you will find:A circuit schematic of the MOSFET amplifier. You can use the sliders to the left of the circuit to control various parameters of the MOSFET and the amplifier.A plot (as a function of time) of selected voltages from the amplifier circuit. You can select the input waveform (e.g., sine wave, square wave, various types of music) by using the \\(v_\\mathrm{IN}\\) drop-down menu and the associated sliders. (The parameter \\(V_\\mathrm{MAX}\\) sets the maximum range on the plots.)The \&#34;Play\&#34; button which lets you listen to the selected voltage waveform as sound. Try it out!Listen to:vINvOUTvRGraph:vINvOUTvRvIN:Zero InputUnit ImpulseUnit StepSine WaveSquare WaveClassical MusicFolk MusicJazz MusicReggae MusicYour browser must support the Canvas element and have JavaScript enabled to view this tool.Your browser must support the Canvas element and have JavaScript enabled to view this tool.Experiment 1: Distorted outputBegin by selecting a sine wave input in the drop-down menu for \\(v_\\mathrm{IN}\\). Then, adjust the sliders to the baseline (default) setting shown below.Baseline setting of sliders:Peak to peak voltage: \\(v_\\mathrm{IN}=3~\\mathrm{V}\\),Frequency: \\(f = 1000~\\mathrm{Hz}\\),Supply voltage: \\(V_\\mathrm{S}=1.6~\\mathrm{V}\\),Input bias voltage: \\(V_\\mathrm{BIAS}=2.5~\\mathrm{V}\\),Pull-up resistor: \\(R = 10~\\mathrm{k}\\Omega\\),MOSFET parameter: \\(K=\\frac{1~\\mathrm{mA}}{\\mathrm{V}^2}\\),MOSFET threshold voltage: \\(V_\\mathrm{T} = 1~\\mathrm{V}\\),Vertical plot range: \\(V_\\mathrm{MAX} = 2~\\mathrm{V}\\).You should observe in the plot that with the baseline settings, the amplifier produces a distorted sine wave signal for \\(v_{OUT}\\). Next, go ahead and select one of the music signals as the input and listen to each of \\(v_{IN}\\) and \\(v_{OUT}\\), and confirm for yourself that the output sounds degraded at the chosen slider settings. You will notice that the graph now plots the music signal waveforms. Think about the reasons why the amplifier is producing a distorted output.Experiment 2: Linear regimeWe now study the amplifier&#39;s small signal behavior. Select a sine wave as the input signal. To study the small signal behavior, reduce the value of \\(v_{IN}\\) to 0.1V (peak-to-peak) by using the \\(v_{IN}\\) slider. Keeping the rest of the parameters at their baseline settings, derive an appropriate value of \\(V_{BIAS}\\) that will ensure saturation region operation for the MOSFET for the 0.1V peak-to-peak swing for \\(v_{IN}\\). Make sure to think about both positive and negative excursions of the signals.Next, use the \\(V_{BIAS}\\) slider to choose your computed value for \\(V_{BIAS}\\) and see if the observed plot of \\(v_{OUT}\\) is more-or-less distortion free. If your calculation was right, then the output will indeed be distortion free.Next, select one of the music signals as the input and listen to each of \\(v_{IN}\\) and \\(v_{OUT}\\), and confirm for yourself that the output sounds much better than in Experiment 1. Also, based on sound volume, convince yourself that \\(v_{OUT}\\) is an amplified version of \\(v_{IN}\\).Experiment 3: Your settingsNow go ahead and experiment with various other settings while listening to the music signal at \\(v_{OUT}\\). Observe the plots and listen to \\(v_{OUT}\\) as you change, for example, the bias voltage \\(V_{BIAS}\\). You will notice that the amplifier distorts the input signal when \\(V_{BIAS}\\) becomes too small, or when it becomes too large. You can also experiment with various values of \\(v_{IN}\\), \\(R_{L}\\), etc., and see how they affect the amplification and distortion.&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content_groups&#34;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;content_type&#34;</span><span class="p">:</span> <span class="s2">&#34;Text&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;course&#34;</span><span class="p">:</span> <span class="s2">&#34;course-v1:edX+DemoX+Demo_Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;course_name&#34;</span><span class="p">:</span> <span class="s2">&#34;edX Demonstration Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;excerpt&#34;</span><span class="p">:</span> <span class="s2">&#34;There are no responses that need to be checked.In the &lt;b&gt;lab&lt;/b&gt; below, you&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;location&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Example Week 2: Get Interactive&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Lesson 2 - Let&#39;s Get Interactive!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;Electronic Sound Experiment&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;org&#34;</span><span class="p">:</span> <span class="s2">&#34;edX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;start_date&#34;</span><span class="p">:</span> <span class="s2">&#34;1970-01-01T05:00:00+00:00&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;/courses/course-v1:edX+DemoX+Demo_Course/jump_to/block-v1:edX+DemoX+Demo_Course+type@html+block@Lab_5B_Mosfet_Amplifier_Experiment&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;score&#34;</span><span class="p">:</span> <span class="mf">0.16797835</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;took&#34;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;total&#34;</span><span class="p">:</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>同理在课程首页的搜索和Dashboard里的搜索也类似</p>
<p>以上这个技巧对我们做调试十分有帮助，因为输出在命令行所以我们可以尽情使用grep和jq等工具来筛选信息。只要数据能流向命令行，我们的linux工具箱就将发挥作用，工具的组合威力每次都能让我大吃一惊。管道大概是Unix工具箱最美妙的特性之一</p>
<p>评测发现搜索必须是个词，好比搜demo课程，搜索<code>edx</code>可以搜到内容，而搜索<code>e</code>则无法搜索到，这应该和分词有关。在edx本土化（汉化）的过程中这个问题应该也会存在</p>
<p>在课程内部进行搜索，可以检索中文</p>
<p>###分析源码
####类继承关系</p>
<p>waiting&hellip; 具体的源码分析留到之后有时间再折腾。今天大体上已经将search服务干净地分离出来了，据此可以做许多有趣的东西</p>
<p>###Elasticsearch
Elasticsearch 是一个分布式可扩展的实时搜索和分析引擎。它能帮助你搜索、分析和浏览数据。edx中的相关搜索都是基于它写的</p>
<p>####资源</p>
<ul>
<li><a href="http://es.xiaoleilu.com/">Elasticsearch 权威指南（中文版）</a></li>
<li><a href="http://www.learnes.net/getting_started/README.html">Elasticsearch 权威指南</a></li>
<li><a href="http://www.justinablog.com/archives/967">使用Python进行Elasticsearch数据索引</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">种瓜</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2016-01-20
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/edx/"> edx</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/edx/edx-tools/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">edx tools</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E5%B7%A5%E5%85%B7/ansible-note/">
            <span class="next-text nav-default">ansible使用笔记</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="mailto:wuwenjie718@gmail.com" class="iconfont icon-out-me" title="out-me"></a>
      <a href="https://github.com/wwj718" class="iconfont icon-github" title="github"></a>
  <a href="http://wwj718.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  
  <span><a target="_blank" href="https://cn.bing.com/search?q=site%3Awwj718.github.io%20%20codelab-adapter">搜索本站</a></span>
  <span class="division">|</span>
  <span><a target="_blank" href="/index.xml">RSS订阅</a></span>
  <span class="division">|</span>
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2013 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span>种瓜</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="/post/img/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="/post/img/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="/post/img/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>

<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?18db4b662c04fbd6cc2851d246c51b3f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>






</body>
</html>
